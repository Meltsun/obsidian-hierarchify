# 问题
在obsidian，或者说markdown中，有多种可以表示层级关系的结构：
1. 文件树
1. 标题
1. 列表
1. 链接/标签
所以我有时会纠结，我想记录几条内容，那么这些内容应该是一个文件夹中的若干篇笔记？还是是一个笔记中的若干个标题？亦或是一个标题下的若干个列表项？或者为他们写上相同的链接/标签？
对于这个问题，一个合理的方法是使用Zettelkasten笔记法，即一切关系都使用链接来表达。但是文件树仍有优势，它可以方便的体现树结构，让我能迅速地寻找到需要的知识，因此目前同时使用文件夹树和ZK。一个文件夹中的笔记并没有链接，无法与ZK笔记配合
所以我决定做一个插件来完成这些结构之间的互转，解决纠结。

# 功能
1. 选取一个文件夹，右键点击，创建一个和文件夹同名的笔记，把文件夹中所有笔记合并到此笔记
	- 每个笔记的名称为一个1级标题；若原来的笔记已经包含一级标题，需要先把所有标题降级
	- 若原来的笔记包含指向文件夹笔记的链接，删除它们
	- 将指向原来的笔记的链接改为指向新笔记
	- 处理序号
	- 可选，操作后删除此文件夹
1. 选取一个文件，右键，把所有链接到此笔记的笔记合并到此笔记
	- 每个笔记的名称为一个1级标题；若原本笔记已经包含一级标题，需要先把所有标题降级
	- 将指向此笔记的链接删除
	- 将指向原来的笔记的链接改为指向新笔记
	- 处理序号
	- 可选，操作后删除原来的笔记
1. 在一个笔记上点右键，按照最顶级标题进行拆分
	- 每个笔记的名称为一个1级标题，拆分后将其中标题升级
	- 若有指向原来标题的链接，删除它们
	- 可选，选择创建新的文件夹盛装拆分后的笔记
		- 可选，初始化文件夹笔记
			- 可选，拆分后的笔记末尾添加链接，指向文件夹笔记
	- 可选，操作后删除原来的笔记
	1. 处理序号
1. 右键点击编辑模式下的一个标题行，改变所有同等级标题的级别
	1. 可以改成标题或列表或文件
	1. 如果改成了列表，将指向标题的链接改为指向更高一级标题，并将其下内容添加tab
	1. 如果改成了标题，调整其中标题的等级
	1. 如果改成了文件，标题作为文件名，其中子标题升级
		- 整合note composer
	1. 处理序号
1. 右键点击编辑模式下的顶级列表行，把所有同等级列表改为标题
	1. 子列表提前
	1. 处理序号
1. 处理一个笔记的序号
	1. 可选，为标题添加序号
	1. 可选，从1或者任意开始，或者全为1
1. 处理库中所有笔记的序号
1. 处理库中所有文件夹
	1. 可选，添加文件夹笔记
		1. 可选，为其中所有笔记添加指向文件夹笔记的链接



# 模块结构
## 单标题转单标题
1. 添加一个右键菜单，在标题行上点右键时触发
1. 获取当前行的标题等级l 和 标题序号记录r
1. 如果等级不够用了，则改为转列表


1. 对所有标题行，如果当前记录中等级低于l的项与r相同，则增加/删除#

## 标题转列表
1. 

## 文件夹转笔记
1. 添加相应的右键菜单
1. 如果文件夹没有文件夹笔记，创建之
1. 依次处理文件夹中除了文件夹笔记之外的所有笔记
	1. 检测最高级标题，如果为1，降级


# TODO:
## 序号处理
1. 代码块有bug
1. 嵌套列表如果不以1开始不会被识别为列表
## 标题转列表
1. 目前总是会新建列表。希望如果之前已经存在列表则合并之








